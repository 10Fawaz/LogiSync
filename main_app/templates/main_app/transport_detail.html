{% extends 'base.html' %}
{% block content %}

<div class="transports-conainter">
  <div class="card-action">
    <h1>Transport Details</h1>
<<<<<<< HEAD
    <h5>Transport name: {{ transport.name }}</h5>
    <h5>Transport Description: {{ transport.description }}</h5>
    <h5>Source: {{ transport.source }}</h5>
    <h5>Destination: {{ transport.destination }}</h5>
=======

    <h5>Transport Code: {{ transport.code }}</h5>
    <h5>Transport Name: {{ transport.name }}</h5>
    <h5>Transport Description: {{ transport.description }}</h5>

    <h5>
      Source:
      {{ transport.source }}
      {% if transport.source.code %} ({{ transport.source.code }}){% endif %}
    </h5>

    <h5>
      Destination:
      {{ transport.destination }}
      {% if transport.destination.code %} ({{ transport.destination.code }}){% endif %}
    </h5>

    {% if transport.type %}
      <h5>Type: {{ transport.type }}{% if transport.type.code %} ({{ transport.type.code }}){% endif %}</h5>
    {% endif %}

    {% if transport.driver %}
      <h5>Driver: {{ transport.driver.username }}</h5>
    {% endif %}
>>>>>>> main

    {% load static %}
    <img
      class="transports-pic"
      src="{% static transport.image|cut:'main_app/static/' %}"
<<<<<<< HEAD
      alt="transport Image"
    />

    <div class="qr-code">
      <h5>Scan the QR Code to see the tasks of containers:</h5>
      <img src="{% url 'qr_code' transport.id %}" alt="QR Code for {{ transport.name }}" >
    </div>

    <a href="{% url 'transports_update' transport.id %}">Edit</a>
    <a href="{% url 'transports_delete' transport.id %}">Delete</a>
    <a href="{% url 'transport_list' %}"><button>Back</button></a>
=======
      width="100"
      height="100"
      alt="Transport Image"
    />

    <div class="card-action" style="margin-top: 1rem;">
      <a href="{% url 'transports_update' transport.id %}">Edit</a>
      <a href="{% url 'transports_delete' transport.id %}">Delete</a>
    </div>
>>>>>>> main
  </div>

  {% if msg %}
    <h2>{{ msg }}</h2>
  {% endif %}
</div>

<div class="transports-conainter" style="margin-top: 1rem;">
  <h2>Containers in this Transport</h2>
  <h4>Current container count: {{ container_exsist|length }}</h4>

  {% if container_exsist %}
    {% for container in container_exsist %}
      <div class="container-card" style="margin-bottom: .75rem;">
        <a href="{% url 'container_detail' container.id %}">
          <h3>Container {{ container.code }}</h3>
          <p>Container Description: {{ container.description }}</p>
          <p>Current Weight: {{ container.currnt_weight_capacity }}</p>
          <p>Max Weight: {{ container.weight_capacity }}</p>
        </a>

        <form action="{% url 'unassoc_container' transport.id container.id %}" method="post" style="margin-top:.5rem;">
          {% csrf_token %}
          <button type="submit">Remove from Transport</button>
        </form>
      </div>
    {% endfor %}
  {% else %}
    <p>No containers currently assigned to this transport.</p>
  {% endif %}
</div>

<div class="transports-conainter" style="margin-top: 1rem;">
  <h2>Available Containers (not in any transport)</h2>

  {% if container_doesnt_contain %}
    {% for container in container_doesnt_contain %}
      <div class="container-card" style="margin-bottom: .75rem;">
        <a href="{% url 'container_detail' container.id %}">
          <h3>Container {{ container.code }}</h3>
          <p>Container Description: {{ container.description }}</p>
          <p>Current Weight: {{ container.currnt_weight_capacity }}</p>
          <p>Max Weight: {{ container.weight_capacity }}</p>
        </a>

        <form action="{% url 'assoc_container' transport.id container.id %}" method="post" style="margin-top:.5rem;">
          {% csrf_token %}
          <button type="submit">Add to Transport</button>
        </form>
      </div>
    {% endfor %}
  {% else %}
    <p>All containers are currently assigned.</p>
  {% endif %}
</div>

<div style="margin-top: 1rem;">
  <a href="{% url 'transport_list' %}"><button>Back</button></a>
</div>

{% endblock %}
